import React, { useEffect, useRef, useState } from "react";
import anime from "animejs";

const TwoWayIcon: React.FC = () => {
  const svgRef = useRef<SVGSVGElement>();
  const [play, setPlay] = useState(false);
  useEffect(() => {
    anime({
      targets: svgRef.current.querySelector("#svg_1"),
      rotateZ: play ? 90 : 0,
      duration: 230,
      delay: 0,
      endDelay: 0,
      easing: "easeInQuad",
    });
  }, [play]);

  useEffect(() => {
    const targetNode = svgRef.current.closest("[data-rule='animation']");

    if (targetNode) {
      targetNode.addEventListener("mouseenter", () => setPlay(true));
      targetNode.addEventListener("mouseleave", () => setPlay(false));
      return () => {
        targetNode.removeEventListener("mouseenter", () => setPlay(true));
        targetNode.removeEventListener("mouseenter", () => setPlay(false));
      };
    }
  }, []);

  return (
    <svg ref={svgRef}>
      <g style={{ pointerEvents: "all" }}>
        <path
          fill="#fff"
          d="M31.9967845242183,14.521708866389845 C33.89738450719115,14.52401464802884 35.71306318845449,14.839772615526421 37.43259545175977,15.367280776050826 L36.071709595009466,17.625677828669417 L45.73179124917937,17.625677828669417 L43.31615304208216,13.611528645701734 L40.90235880762548,9.59857963841203 L39.63171829798329,11.713146468565638 C37.250336049093185,10.877757138223323 34.6831157645308,10.41022681150433 31.99851560057479,10.41022681150433 C19.641499415408983,10.41022681150433 9.62574966617942,20.021059975709772 9.62574966617942,31.877717578555046 C9.62574966617942,36.798620119566024 11.370042055794798,41.319852123691795 14.27292808108017,44.942279784328434 L17.674822850150548,42.43606536816789 C15.327049645839645,39.50864603089579 13.915439309438307,35.855634523865525 13.907780282163971,31.878902279188512 C13.92487958919533,22.292951267181877 22.007572569772876,14.53640671982075 31.996782732213877,14.521708866389845 L31.9967845242183,14.521708866389845 zM49.724730321647854,18.817682683039422 L46.3228427205955,21.32509727487779 C48.67002456341813,24.251402408941825 50.0816420678375,27.902111573231767 50.088100452090536,31.88002507964359 C50.070999353054404,41.46589699697762 41.98830816448164,49.22133249947921 31.998517392579217,49.23712908107353 C30.22826781764093,49.23493334419566 28.534683779635937,48.95874162673286 26.920155812580436,48.49684765513147 L28.200793915382388,46.37203290658214 L18.540755269320837,46.37203290658214 L20.954606847921916,50.38396056093086 L23.370200254906372,54.40142140343388 L24.716929276029965,52.15893785496863 C27.000971631958222,52.92187474614267 29.445462903665806,53.347514127244594 31.998517392579217,53.34862145265518 C44.357316622232155,53.34641196018222 54.37134783913722,43.73557019872992 54.374250886442866,31.878903998637757 C54.37134783913722,26.95801177432305 52.62581538240103,22.43788365670907 49.724730321647854,18.81768440248868 L49.724730321647854,18.817682683039422 z"
          id="svg_1"
          width="64"
          height="64"
          strokeWidth="1.5"
          strokeDasharray="none"
          style={{ transformOrigin: "center" }}
          stroke="#000"
          opacity="1"
        ></path>
      </g>
    </svg>
  );
};
export default TwoWayIcon;
